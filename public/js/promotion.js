$((function(){$(".ct_btn").click((function(){var o=$(this).parents(".create_btn_row").first();0==o.nextAll(".c_con").length&&o.after('\n                <section class="c_con" >\n                <div class="row">\n                    <div class="col-12">\n                        <div class="float-right cursor_pointer text-danger close_form icon-sm mt-3">\n                            <i class="las la-times-circle"></i>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label for="coupon_no">Coupon</label>\n                    <input type="text" class="form-control" id="coupon_no" placeholder="Coupon" name="coupon_no">\n                    <small class="form-text text-muted">write any specific word of your choice and share it with others\n                        to let them access your course at specific cost or totally free.\n                    </small>\n                </div>\n                <div class="form-group">\n                    <div class="col-3">\n                        <label for="date_time">Until Valid Date?</label>\n                        <input type="datetime" class="form-control" id="date_time" name="date_time">\n                    </div>\n                    <div class="col-3">\n                        <label for="no_of_coupons">Allowed Coupons?</label>\n                        <input type="number" class="form-control" id="no_of_coupons" name="no_of_coupons">\n                    </div>\n                    <div class="col-3">\n                        <label for="percent"> Set Percentage %</label>\n                        '.concat(percentage_select,'\n                    </div>\n                </div>\n                <div class="err_msg text-danger my-2"> </div>\n                <button type="submit" class="btn btn-info"> Create </button>\n\n                </section>\n            '))})),$(".coupon").on("click",".close_form",(function(){confirm("Do you want to close the form?")&&$(this).parents(".c_con").remove()})),$(".coupon").submit((function(o){o.preventDefault();var e=$(this).serialize(),t=$(this).attr("url"),n=$(this).find(".c_con"),s=$(".err_msg"),a=$(".pricing");$.ajax({url:t,type:"post",data:e,success:function(o){a.append('\n                    <form url="'.concat(o.edit,'" class="edit_coupon mt-3">\n                        <div class="container">\n                        <div class="row">\n                            <div class="col-12 col-md-10">\n                                <div class="form-group">\n                                    <input type="text" class="form-control" id="coupon_no" placeholder="Coupon" name="coupon_no" value="').concat(o.coupon,'">\n                                </div>\n                            </div>\n                            <div class="col-2 col-md-1">\n                                <div class="btn btn-danger del_coupon" url="').concat(o.delete,'"> Delete </div>\n                            </div>\n                            <div class="ml-3 ml-md-0 col-6 col-md-1">\n                                <div class="submit btn btn-info mr-1" > Update </div>\n                            </div>\n                        </div>\n                        </div>\n                    </form>\n                ')),coupon_form?show_popup("coupon has been created"):n.remove()},error:function(o){var e=JSON.parse(o.responseText).errors.coupon_no;e&&s.text(e),setTimeout((function(){s.text("")}),1e4)},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"JSON"})})),$(".pricing").on("submit",".edit_coupon",(function(o){o.preventDefault();var e=$(this).serialize(),t=$(this).attr("url"),n=$(this).find("#coupon_no");$.ajax({url:t,type:"post",data:e,success:function(o){n.attr("value",o.coupon),show_message("updated")},error:function(o){var e=JSON.parse(o.responseText).errors.coupon_no;e&&show_message(e)},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"JSON"})})),$(".pricing").on("click",".del_coupon",(function(o){if(confirm("do you want to delete this coupon?")){var e=$(this).attr("url"),t=$(this).parents(".edit_coupon").first();$.ajax({url:e,type:"delete",success:function(o){show_message(o.status),t.remove()},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"JSON"})}})),$("#promotion").removeClass("text-info").addClass("bg-website text-white"),$("#is_free").change((function(){$("#is_free").is(":checked")?$("#set_free").addClass("d-none").removeClass("d-block"):$("#set_free").addClass("d-block").removeClass("d-none")})),$(".update-coupon").click((function(){$("#update-coupon-form").modal({keyboard:!0,focus:!0,show:!0}),$("#modal_coupon_no").val($(this).attr("coupon_no")),$("#modal_date_time").val($(this).attr("date_time")),1==$(this).attr("is_free")&&$("#modal_is_free").prop("checked",!0),$("#modal_percentage").val($(this).attr("percentage")),$("#modal_no_of_coupons").val($(this).attr("no_of_coupons")),$("#coupon_id").val($(this).attr("id"))})),$(".coupon_update").submit((function(o){o.preventDefault();var e=$(this).serialize(),t=$(".coupon").attr("url"),n=$(this).find(".c_con"),s=$(".err_msg_update");$.ajax({url:t,type:"post",data:e,success:function(o){coupon_form?($("#update-coupon-form").modal("hide"),show_popup("coupon has been updated")):n.remove()},error:function(o){var e=JSON.parse(o.responseText).errors.coupon_no;e&&s.text(e),setTimeout((function(){s.text("")}),1e4)},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},dataType:"JSON"})}))}));